"""
生存分析功能演示 - LIHC平台
Survival Analysis Demo for LIHC Platform

请按照以下步骤使用生存分析功能：

## 🎯 功能概述
该生存分析模块为您的目标基因在TCGA-LIHC数据集中进行：
- Kaplan-Meier生存曲线分析
- Log-rank检验统计比较
- 总生存期 (Overall Survival, OS) 分析
- 无复发生存期 (Recurrence-Free Survival, RFS) 分析

## 📊 使用步骤

### 1. 访问生存分析页面
- 打开 http://localhost:8050
- 点击导航栏中的 "📈 Survival Analysis" 标签

### 2. 选择分析参数
- **Target Gene**: 从下拉菜单选择目标基因 (如: TP53, MYC, KRAS, EGFR等)
- **Dataset**: 选择 "TCGA-LIHC (Demo Data)"

### 3. 运行分析
- 点击 "📊 Generate Survival Curves" 按钮
- 系统将自动执行以下分析：
  * 根据基因表达中位数将患者分为高表达组和低表达组  
  * 计算两组的Kaplan-Meier生存曲线
  * 执行Log-rank检验比较组间差异
  * 生成可视化图表和统计结果

### 4. 结果解读
生存分析结果包含以下信息：

#### 📈 Kaplan-Meier生存曲线图
- **红色曲线**: 高表达组
- **蓝色曲线**: 低表达组  
- **曲线位置**: 曲线越高表示生存概率越好
- **P值标注**: Log-rank检验的统计显著性

#### 📊 统计摘要
- **Total Samples**: 总样本数
- **High Expression**: 高表达组样本数 (n=)
- **Low Expression**: 低表达组样本数 (n=)
- **Log-rank p-value**: 统计检验P值
- **Result**: 显著性判断 (p < 0.05为显著)

#### 🏥 临床解读
- **Prognostic Value**: 预后价值评估
- **Therapeutic Implications**: 治疗意义和靶向策略建议

## 🧬 示例分析

以下是不同基因的预期分析结果示例：

### TP53 (肿瘤抑制基因)
```
分组策略: 根据TP53表达中位数分组
分析终点: OS和RFS
预期结果: TP53低表达可能与较差预后相关
治疗意义: TP53缺失提示DNA损伤修复缺陷，可考虑DNA损伤诱导疗法
```

### MYC (原癌基因)  
```
分组策略: 根据MYC表达中位数分组
分析终点: OS和RFS
预期结果: MYC高表达可能与侵袭性行为相关
治疗意义: MYC扩增提示可使用MYC抑制剂或CDK4/6抑制剂
```

### VEGFA (血管生成因子)
```
分组策略: 根据VEGFA表达中位数分组  
分析终点: OS和RFS
预期结果: VEGFA高表达可能影响血管生成和转移
治疗意义: VEGFA高表达提示抗血管生成治疗的潜在获益
```

## 📋 注意事项

1. **数据质量**: 当前使用模拟的TCGA-LIHC演示数据
2. **样本分组**: 基于基因表达中位数进行二分组
3. **统计显著性**: P < 0.05认为有统计学意义
4. **临床转化**: 结果需要在真实临床队列中进一步验证

## 🔬 技术实现

- **Kaplan-Meier估计**: 非参数生存概率估计方法
- **Log-rank检验**: 比较生存曲线差异的经典统计方法
- **数据处理**: 自动处理缺失值和截尾数据
- **可视化**: 交互式Plotly图表，支持导出

## 🎯 应用场景

该功能适用于：
- 🧬 基因表达与预后关系研究
- 🎯 治疗靶点优先级排序  
- 📊 生物标志物验证
- 🏥 个性化治疗策略制定

通过这个生存分析工具，研究人员可以快速评估基因表达对肝癌患者预后的影响，为精准医疗提供数据支持。
"""